{
    "type": "object",
    "properties": {
        "type": {
            "title": "Is user a contact, lead or existing client?",
            "type": "string",
            "enum": [
                "Existing",
                "New"
            ],
            "default": "New"
        }
    },
    "allOf": [
        {
            "if": {
                "properties": {
                    "type": {
                        "const": "Existing"
                    }
                }
            },
            "then": {
                "properties": {
                    "existingEmail": {
                        "type": "string",
                        "title": "Email ID"
                    },
                    "offeringFilter": {
                        "title": "Filter offering based on : ",
                        "type": "string",
                        "enum": [
                            "Class",
                            "Program"
                        ],
                        "default": "Program"
                    },
                    "offerings": {
                        "title": "Select Offerings",
                        "type": "string"
                    }
                },
                "required": [
                    "existingEmail",
                    "offering"
                ]
            }
        },
        {
            "if": {
                "properties": {
                    "type": {
                        "const": "New"
                    }
                }
            },
            "then": {
                "properties": {
                    "firstname": {
                        "type": "string",
                        "title": "First Name"
                    },
                    "lastname": {
                        "type": "string",
                        "title": "Last Name"
                    },
                    "phone": {
                        "type": "string",
                        "title": "Phone Number",
                        "minLength": 10,
                        "format": "phone-in"
                    },
                    "email": {
                        "type": "string",
                        "title": "Email ID",
                        "format": "email"
                    },
                    "offeringFilter": {
                        "title": "Filter offering based on : ",
                        "type": "string",
                        "enum": [
                            "Class",
                            "Program"
                        ],
                        "default": "Program"
                    }
                   
                    
                },
                "allOf": [
                    {
                      "if": {
                        "properties": {
                          "offeringFilter": {
                            "const": "Class"
                          }
                        }
                      },
                      "then": {
                        "properties": {
                            "classBasedOfferings": {
                                "title": "Select offering",
                                "type": "string"
                            },
                            "effectiveDate": {
                                "title": "Effective Date",
                                "type": "string",
                                "format": "date-time"
                            }
                            
                        },
                        "required": [
                          "classBasedOfferings",
                          "effectiveDate"
                        ]
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "offeringFilter": {
                            "const": "Program"
                          }
                        }
                      },
                      "then": {
                        "properties": {
                            "offerings": {
                                "title": "Select offering",
                                "type": "string"
                            },
                            "effectiveDate": {
                                "title": "Effective Date",
                                "type": "string",
                                "format": "date-time"
                            },
                            "packageDuration": {
                                "title": "Package Duration",
                                "type": "number"
                            }

                        },
                        "required": [
                            "offerings",
                            "effectiveDate",
                            "packageDuration"
                        ]
                      }
                    },
                    {
                      "required": [
                        "offeringFilter"
                      ]
                    }
                  ],
                "required": [
                    "firstname",
                    "lastname",
                    "phone",
                    "email"
                ]
            }
        },
        {
            "required": [
                "type"
            ]
        }
    ]
}